.MODEL SMALL
.STACK 100H
.DATA
.CODE
A DB 'ENTER STRING:$'
B DB 'REVERSE STRING:$'
COUNT DW 0
MAIN PROC

MOV AX,@DATA 
MOV DS,AX
LEA DX,A
MOV AH,9
INT 21H

XOR CX,CX
MOV AH,1
INT 21H

VAL1:
CMP AL,0DH
JE END_VAL1
PUSH AX
INC CX                                                            
INT 21H
JMP VAL1

END_VAL1:
MOV DX,0DH   
MOV AH,2
INT 21H

MOV DX,0AH
MOV AH,2
INT 21H
MOV BX,50H
XCHG BX,SP 
PUSH 0020H
XCHG BX,SP
INC COUNT

VAL2:
POP DX     
XCHG BX,SP
PUSH DX       
XCHG BX,SP
INC COUNT

LOOP VAL2
LEA DX, B
MOV AH,9
INT 21H

MOV CX,COUNT
MOV COUNT,0
PUSH 0020H    
INC COUNT


AGAIN:
XCHG BX, SP  
POP DX          
XCHG BX, SP  
CMP DL, 20H
JNE QUIT
MOV AH, 2

VAL3:
POP DX        
INT 21H
DEC COUNT
JNZ VAL3
MOV DX, 0020H 

QUIT:
PUSH DX
INC COUNT

LOOP AGAIN

MOV AH, 4CH
INT 21H

MAIN ENDP
END MAIN